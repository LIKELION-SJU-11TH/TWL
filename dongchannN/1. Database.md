# 1. Database
### DB 사용 이유
데이터를 저장하기 위해서 데이터베이스를 쓰는 것은 대부분 아실겁니다. 하지만 데이터를 저장할 때 파일과 같이 저장할 수 있는 파일 시스템도 있을 것이고 엑셀을 사용할 수도 있는데 왜 데이터베이스를 쓸까요?
 그 이유는 데이터베이스는 데이터를 구조화하고 저장해 일관성, 안정성, 보안성, 효율성과 대용량의 데이터처리를 보장해주기 때문입니다.

<br>

### DBMS (Database Management System)
데이터베이스를 운영하고 관리하는 소프트웨어입니다. 데이터베이스를 생성, 수정, 검색, 삭제하는 등의 작업을 수행하며 데이터베이스를 관리합니다.

MySQL, MariaDB, Oracle 등 여러 DBMS가 있고 데이터베이스 모델에 따라 관계형, 계층형, 객체지향형 등 여러 분류로 나눌 수 있습니다.

<br>

### RDB (Relational DataBase)
관계형 데이터베이스라고 합니다. 일반적으로 굉장히 많이 사용되고 엑셀과 같이 테이블의 형태로 표현해줍니다.
![](./img/table%20img.png)
위를 보면 column과 row라는 단어가 보입니다. 
 column은 테이블의 속성(attribute)를 의미합니다. 만약 위의 테이블이 회원정보를 저장하는 테이블이라면 컬럼은 회원 이름, 아이디, 비밀번호, 이메일, 나이 등으로 구성될 수 있을 것입니다.
 row는 테이블의 레코드(record)라고 볼 수 있습니다. 위에서 예와 마찬가지로 각 row는 한명의 회원 정보를 나타낼 수 있을 것입니다.

<br>

### RDBMS (Relational DataBase Management System)
 위에서 DBMS를 배웠습니다. RDBMS는 DBMS 중 관계형 데이터 베이스를 생성하고 수정할 수 있는 소프트웨어입니다.

대표적으로 MySQL, MariaDB, Oracle 등이 있습니다.

<br>

### DB용어
- Table (테이블) : 데이터를 저장하는 가장 기본적인 단위, 행(row = record = tuple)과 열(column = attribute = field)로 구성

- Index (인덱스) : 테이블 내의 특정 열에 대해 검색 성능을 향상시키기 위해 생성하는 데이터 구조.

- Schema(스키마) : 데이터베이스를 구성하는 데이터 객체, 속성, 레고드 간의 관계 등을 나타내는 설계도입니다. 데이터베이스의 엔티티와 그 엔티티들 간의 관계를 정의하고 어떠한 타입의 데이터가 어느 위치에 적재돼야 하는지, 또 다른 테이블이나 엔티티와 어떠한 관계를 맺는지 정의합니다.

	 스키마에는 외부 스키마, 개념 스키마, 내부 스키마가 있습니다.
 	외부 스키마는 사용들이 인터페이스를 통해 접하는 데이터의 논리적 구조를 나타내는 것입니다. 사용자의 뷰에 따라 여러개로 이루어질 수 있습니다.
 	개념 스키마는 전체적인 논리적 구조이다. 모든 데이터들간의 관계와 구조를 정의합니다.
 	내부 스키마는 실제 데이터베이스 시스템에서 데이터가 어떻게 저장되는 방법을 정의합니다.

<br>

- Key

	Super key (슈퍼키)
 각 행을 유일하게 식별할 수 있는 속성들의 집합입니다.(속성이 한개가 아니여도 됩니다.)

	Candidate key (후보키)
 각 행을 유일하게 식별할 수 있는 최소성을 만족한 속성들의 집합입니다.

	Primary key (기본키)
 후보키 중 하나를 메인으로 선택한 키입니다.

	Alternate Key (대체키)
기본키를 제외한 나머지 후보키를 의미합니다.

	Foreign key (외래키)
 한 테이블이 다른 테이블의 기본키를 참조해 테이블 간의 관계를 만드는 것입니다.

<br>

- transaction (트랜잭션) : 데이터베이스에서 수행되는 작업의 단위.

<br>

### 유일성과 최소성
- 유일성은  하나의 키값으로 row (record, tuple)을 식별할 수 있는 성질입니다. 회원정보 테이블을 예로 들어보겠습니다. 회원정보 테이블에는 이름, 주민등록번호, 성별, 나이, 가입일이 있다고 가정하겠습니다.
여기서 이름, 성별, 나이는 중복 가능한 데이터입니다. 하지만 주민등록번호는 중복 가능한 데이터가 아니므로 유일성을 만족하는 키라고 말할 수 있습니다.

- 최소성은 키를 구성하는 속성들 중 꼭 필요한 속성들로만 키를 구성하는 성질입니다. 만약 회원정보 테이블이 이름, 성별, 나이, 가입일이 있고 이름과 가입일만으로 한명을 특정지을 수 있다면 최소성을 만족하게 됩니다.
하지만 회원정보 테이블에 동명이인이 없어 이름만으로 한명을 특정지을 수 있다면 이름 + 가입일은 최소성을 만족하지 못하게 됩니다.

<br>

### DB간의 관계
- 1:1 : 하나의 레코드가 다른 테이블의 레코드 한개와 연결된 경우
예를 들면 회원 정보 테이블과 그 회원의 프로필 사진을 저장하는 테이블입니다. 
![](./img/1-1%20img.png)
 member라는 테이블에 img라는 컬럼을 추가하면 되는데 왜 다른 테이블로 만들었을까요?
 사진과 같은 데이터는 용량이 일반적으로 크기 때문에 같이 저장하면 테이블의 용량이 매우 커질 수 있습니다. 회원정보를 조회할 때 사진 데이터까지 모두 조회하게 되어 성능이 저하될 수 있으므로 따로 테이블을 추가하는 것이 성능상으로 좋습니다.
 또한 업데이트가 거의 발생하지 않는 경우 또한 따로 테이블을 만들어 주는 것도 성능 상 이점이 있습니다.

- 1:N : 하나의 레코드가 다른 테이블의 레코드 여러개와 연결된 경우
 학생과 학교이라는 테이블의 관계가 예가 될 수 있습니다. 학생을 학교를 한 곳 다니지만 학교는 학생을 여러명 포함하고 있습니다.

- N:M : 여러개의 레코드가 다른 테이블의 여러개의 레코드와 관계가 있는 경우
 유저와 채팅방의 관계를 예로 들 수 있습니다. 한 유저는 여러 채팅방에 참여할 수 있고 한 채팅방에는 여러 유저들이 참여할 수 있습니다. 이러한 경우 별도의 중계 테이블을 생성해줍니다. 
![](./img/N-M%20img.png)

<br>

### ERD (Entity-Relationship Diagram)
엔티티와 관계를 다이어그램으로 나타낸 것입니다.
데이터베이스의 구조를 시각화로 설계해 이해하기 쉽게 만들어줍니다.
위의 그림처럼 엔티티와 그에 따른 속성 그리고 관계들을 ERD 툴을 이용해서 시각화 할 수 있습니다.
